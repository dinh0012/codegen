<?php
// This file auto-generated by swagger-codegen-crmbase

namespace App;

// codegenGetType defined on app/Helpers/codegenGetType.php
class DefinitionFactory
{protected $adapter = null;
    public function __construct($adapter)
    {
        $this->adapter = $adapter;
    }

    /**
     * 引数の型に応じて、必要なAdapterを返す
     * @param type string
     * @return \class
     */
    public static function factory($type)
    {
        $adapter = sprintf("\App\%sValidator", $type);
        if (!class_exists($adapter)) {
            throw new \Exception('Unsupported Adapter.');
        }
        return new self(new $adapter());
    }



    public function validate($data) {
        $validated = $this->adapter->check($data);

        if ($this->anyValidateError($validated)) {
            return $validated;
        }
        return false;
    }

    // check validated value
    private function anyValidateError($validated) {
        if (empty($validated)) {
            return false;
        }
        foreach ($validated as $key => $value) {
            if (gettype($value) === 'array') {
                if ($this->anyValidateError($value)) {
                    return true;
                }
            } elseif ($value) {
                return true;
            }
        }
        return false;
    }
}


{{#definitions}}
  {{> definition}}
{{/definitions}}
